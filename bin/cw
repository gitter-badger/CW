#!/usr/bin/env ruby

iterate = nil
count   = 1
def number_or_nil(string)
  Integer(string || '')
rescue ArgumentError
  nil
end

def iterate?
  number_or_nil ARGV[ARGV.size - 1]
end

if iterate?
  count = ARGV.pop.to_i
  iterate = true
end

count.times do |iter|
  print "Iteration: #{iter + 1}   " if iterate
  ARGV.each do |arg|
    system("ruby #{arg}")
  end
end
